{% extends "base.html" %}

{% block title %}Base64 Converter - MyTools{% endblock %}

{% block extra_css %}
<style>
    .conversion-card {
        border: 2px solid #e9ecef;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
        transition: all 0.3s;
    }
    
    .conversion-card:hover {
        border-color: #0d6efd;
        box-shadow: 0 4px 12px rgba(13, 110, 253, 0.15);
    }
    
    .conversion-card.active {
        border-color: #0d6efd;
        background: #f8f9ff;
    }
    
    .conversion-icon {
        width: 60px;
        height: 60px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        color: white;
        margin-bottom: 15px;
    }
    
    .text-area-large {
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 13px;
        line-height: 1.5;
        min-height: 300px;
        resize: vertical;
    }
    
    .preview-container {
        border: 2px dashed #dee2e6;
        border-radius: 8px;
        padding: 20px;
        text-align: center;
        min-height: 400px;
        background: #f8f9fa;
        overflow: auto;
    }
    
    .preview-image {
        max-width: 100%;
        max-height: 500px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .file-upload-zone {
        border: 3px dashed #0d6efd;
        border-radius: 12px;
        padding: 40px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
        background: linear-gradient(135deg, #f8f9ff 0%, #e7f1ff 100%);
    }
    
    .file-upload-zone:hover {
        border-color: #0a58ca;
        background: linear-gradient(135deg, #e7f1ff 0%, #d6e9ff 100%);
    }
    
    .file-upload-zone.dragover {
        background: linear-gradient(135deg, #cfe2ff 0%, #9ec5fe 100%);
        border-color: #084298;
    }
    
    .stat-badge {
        display: inline-block;
        padding: 6px 12px;
        background: #e7f1ff;
        border-radius: 20px;
        margin: 5px;
        font-size: 0.85rem;
    }
    
    .conversion-mode-btn {
        padding: 15px;
        border: 2px solid #dee2e6;
        border-radius: 8px;
        background: white;
        cursor: pointer;
        transition: all 0.3s;
        text-align: center;
        margin-bottom: 10px;
    }
    
    .conversion-mode-btn:hover {
        border-color: #0d6efd;
        background: #f8f9ff;
    }
    
    .conversion-mode-btn.active {
        border-color: #0d6efd;
        background: linear-gradient(135deg, #0d6efd 0%, #0a58ca 100%);
        color: white;
    }
    
    .conversion-mode-btn i {
        font-size: 24px;
        display: block;
        margin-bottom: 8px;
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <a href="{{ url_for('index') }}" class="btn btn-outline-primary btn-sm mb-2">
                <i class="bi bi-arrow-left"></i> Back
            </a>
            <h2 class="mb-0"><i class="bi bi-file-binary"></i> Base64 Converter</h2>
            <p class="text-muted">Convert between Base64 and files (PDF, Images, Text)</p>
        </div>
    </div>

    <!-- Conversion Mode Selection -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-arrow-left-right"></i> Select Conversion Type</h5>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <div class="conversion-mode-btn active" data-mode="to-file">
                                <i class="bi bi-file-earmark-arrow-down"></i>
                                <strong>Base64 → File</strong>
                                <small class="d-block text-muted">Decode to PDF/Image</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="conversion-mode-btn" data-mode="to-base64">
                                <i class="bi bi-file-earmark-arrow-up"></i>
                                <strong>File → Base64</strong>
                                <small class="d-block text-muted">Encode file to Base64</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="conversion-mode-btn" data-mode="text-to-base64">
                                <i class="bi bi-type"></i>
                                <strong>Text → Base64</strong>
                                <small class="d-block text-muted">Encode text</small>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="conversion-mode-btn" data-mode="base64-to-text">
                                <i class="bi bi-fonts"></i>
                                <strong>Base64 → Text</strong>
                                <small class="d-block text-muted">Decode to text</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row g-3">
        <!-- Input Section -->
        <div class="col-lg-6">
            <div class="card shadow-sm">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="bi bi-input-cursor"></i> Input</h5>
                </div>
                <div class="card-body">
                    <!-- Base64 to File Mode -->
                    <div class="conversion-section" id="section-to-file">
                        <label class="form-label fw-bold">Base64 String:</label>
                        <textarea class="form-control text-area-large" id="base64Input" 
                                  placeholder="Paste Base64 encoded string here..."></textarea>
                        <div class="mt-3">
                            <button class="btn btn-primary" id="decodeBtn">
                                <i class="bi bi-arrow-down-circle"></i> Decode & Preview
                            </button>
                            <button class="btn btn-outline-secondary" id="clearInputBtn">
                                <i class="bi bi-x-circle"></i> Clear
                            </button>
                        </div>
                        <div class="mt-3">
                            <label class="form-label">File Type:</label>
                            <select class="form-select" id="fileTypeSelect">
                                <option value="pdf">PDF</option>
                                <option value="png">PNG Image</option>
                                <option value="jpg">JPG Image</option>
                                <option value="gif">GIF Image</option>
                                <option value="svg">SVG Image</option>
                                <option value="txt">Text File</option>
                                <option value="json">JSON File</option>
                                <option value="xml">XML File</option>
                            </select>
                        </div>
                    </div>

                    <!-- File to Base64 Mode -->
                    <div class="conversion-section" id="section-to-base64" style="display: none;">
                        <div class="file-upload-zone" id="fileUploadZone">
                            <i class="bi bi-cloud-upload" style="font-size: 48px; color: #0d6efd;"></i>
                            <h5 class="mt-3">Drop file here or click to browse</h5>
                            <p class="text-muted">Supports PDF, Images, Text files, etc.</p>
                            <input type="file" id="fileInput" style="display: none;">
                        </div>
                        <div id="fileInfo" class="mt-3" style="display: none;">
                            <div class="alert alert-info">
                                <strong>Selected File:</strong>
                                <div class="mt-2">
                                    <span class="stat-badge"><i class="bi bi-file-earmark"></i> <span id="fileName"></span></span>
                                    <span class="stat-badge"><i class="bi bi-hdd"></i> <span id="fileSize"></span></span>
                                    <span class="stat-badge"><i class="bi bi-filetype-pdf"></i> <span id="fileType"></span></span>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-primary mt-2" id="encodeFileBtn" disabled>
                            <i class="bi bi-arrow-up-circle"></i> Encode to Base64
                        </button>
                    </div>

                    <!-- Text to Base64 Mode -->
                    <div class="conversion-section" id="section-text-to-base64" style="display: none;">
                        <label class="form-label fw-bold">Text to Encode:</label>
                        <textarea class="form-control text-area-large" id="textInput" 
                                  placeholder="Enter text to encode..."></textarea>
                        <button class="btn btn-primary mt-3" id="encodeTextBtn">
                            <i class="bi bi-arrow-up-circle"></i> Encode to Base64
                        </button>
                    </div>

                    <!-- Base64 to Text Mode -->
                    <div class="conversion-section" id="section-base64-to-text" style="display: none;">
                        <label class="form-label fw-bold">Base64 String:</label>
                        <textarea class="form-control text-area-large" id="base64TextInput" 
                                  placeholder="Paste Base64 encoded text here..."></textarea>
                        <button class="btn btn-primary mt-3" id="decodeTextBtn">
                            <i class="bi bi-arrow-down-circle"></i> Decode to Text
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Output/Preview Section -->
        <div class="col-lg-6">
            <div class="card shadow-sm">
                <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="bi bi-eye"></i> Output / Preview</h5>
                    <div>
                        <button class="btn btn-sm btn-light" id="downloadBtn" disabled>
                            <i class="bi bi-download"></i> Download
                        </button>
                        <button class="btn btn-sm btn-light" id="copyOutputBtn" disabled>
                            <i class="bi bi-clipboard"></i> Copy
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="preview-container" id="previewContainer">
                        <div class="text-muted">
                            <i class="bi bi-eye-slash" style="font-size: 48px;"></i>
                            <p class="mt-3">Preview will appear here</p>
                        </div>
                    </div>
                    
                    <!-- Output Text Area -->
                    <textarea class="form-control text-area-large" id="outputText" 
                              style="display: none;" readonly></textarea>
                    
                    <!-- Stats -->
                    <div id="outputStats" class="mt-3" style="display: none;">
                        <small class="text-muted">
                            <strong>Size:</strong> <span id="outputSize">0</span> bytes |
                            <strong>Characters:</strong> <span id="outputChars">0</span>
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Notification Toast -->
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div id="notificationToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <strong class="me-auto">Base64 Converter</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body" id="toastMessage"></div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/base64_converter.js') }}"></script>
{% endblock %}

